<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>T9 Typing by Vineet Srivastav</title>

<link href="style.css" rel="stylesheet"> 
<script src="js/jquery-2.1.3.min.js"></script>
<script>
	function genCharArray(charA, charZ) {
		var a = [], i = charA.charCodeAt(0), j = charZ.charCodeAt(0);
		for (; i <= j; ++i) {
			a.push(String.fromCharCode(i));
		}
		return a;
	}
	
	var alpha =	genCharArray('a', 'z'); // ["a", ..., "z"]
	// Optional Value
	alpha.push('.',',','!',' '); 
	
	var ini = 0;
	var i = 0;
	var time = 5;
	var clicked = 0;
	
	function get_val(k){
		switch(k) {
						case '0' : i = 29;
									break;
						case '1' : i = 26;
									break;
						case '2' : i = 0;
								   break;
						case '3' : i = 3;
								   break;
						case '4' : i = 6;
								   break;
						case '5' : i = 9;
								   break;
						case '6' : i = 12;
								   break;
						case '7' : i = 15;
								   break;
						case '8' : i = 19;
								   break;
						case '9' : i = 22;
								   break;
						case '*' : i = '*';
									break;
						case '#' : i = '#';
									break;
						default : i =0;
								 
					}
		return i;
	}
	
	$(document).ready(function() {
		counter = 2;
		var inside = document.getElementById('input');
		var timer = setInterval(function() {
			counter++;
				//document.getElementById("timelim").innerHTML = counter;
				if (counter	> 100) {
					//Just for resetting
					counter = 2;
				}
			}, 1000);
		
		$("button").mousedown(function(){
			//counter = 0;
			val = this.value;
			if( counter < 2 && ini == val && val != '0' && val != '*' && val != '#'){
				i = get_val(val);
				str = inside.value; 
				str = str.substring(0, str.length - 1);
				//Checking for 7 and 9
				if(i == 15 || i == 22){
					k=2;
				}else{
					k=1;
				}
				//Changing the value
				if(clicked > k){
					clicked = 0;
				}else{
					clicked++;
				}
				str = str + alpha[i+clicked];
				inside.value = str;
				//alert('please wait');
				//var string = document.getElementById("input").value;
				//alert(str.lastIndexOf(string));
			}else{
				i = get_val(val);
				if(i == "*" || i == "#"){
					inside.value = inside.value+i;
				}else{
					inside.value = inside.value+alpha[i];
				}
				counter = 0;
				clicked = 0;
				ini = val;
			}
		});
		
		$("#button1").click(function(){
				str = inside.value; 
				str = str.substring(0, str.length - 1);
				inside.value = str;
			});
			
		$("button").mouseup(function(){
			if(counter > 1){
				str = inside.value; 
				str = str.substring(0, str.length - 1);
				inside.value = str+this.value;
			}
		});
    });
	
	
	
	
</script>
</head>

<body>

<div id="header">
	<h2>T9 - TYPING by Vineet</h2>
</div>
<div id="content">
	<span id="timelim"></span>
	<div>
    	<input type="text" id="input" value="" disabled />
        <input type="button" id="button1">
    </div> 
    <br />
    <div id="pad">
    	<button value="1" id="button">
        	<h4>1</h4>
            <h5>. , !</h5>
        </button>
        <button value="2" id="button">
        	<h4>2</h4>
            <h5>a b c</h5>
        </button>
        <button value="3" id="button">
        	<h4>3</h4>
            <h5>d e f</h5>
        </button>
        <br />
        <button value="4" id="button">
        	<h4>4</h4>
            <h5>g h i</h5>
        </button>
        <button value="5" id="button">
        	<h4>5</h4>
            <h5>j k l</h5>
        </button>
        <button value="6" id="button">
        	<h4>6</h4>
            <h5>m n o</h5>
        </button>
        <br />
        <button value="7" id="button">
        	<h4>7</h4>
            <h5>p q r s</h5>
        </button>
        <button value="8" id="button">
        	<h4>8</h4>
            <h5>t u v</h5>
        </button>
        <button value="9" id="button">
        	<h4>9</h4>
            <h5>w x y z</h5>
        </button>
        <br />
        <button value="*" id="button">
        	<h4>*</h4>
            <h5></h5>
        </button>
        <button value="0" id="button">
        	<h4>0</h4>
            <h5></h5>
        </button>
        <button value="#" id="button">
        	<h4>#</h4>
            <h5></h5>
        </button>
        
        <div style="clear:both"></div>
    </div>
</div>

<!--
function insert(val){
		
	}

-->
</body>
</html>
